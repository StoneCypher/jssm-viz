{"map":"{\"version\":3,\"file\":\"jssm-viz.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/ts/jssm-viz.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"const version = null;\r\nconst vizjs = require('viz.js');\r\nconst default_viz_colors = {\r\n    'graph_bg_color': '#eeeeee',\r\n    'fill_final': '#ddddff',\r\n    'fill_terminal': '#ffdddd',\r\n    'fill_complete': '#ddffdd',\r\n    'legal_1': '#888888',\r\n    'legal_2': '#777777',\r\n    'legal_solo': '#777777',\r\n    'legal_final_1': '#7777aa',\r\n    'legal_final_2': '#666699',\r\n    'legal_final_solo': '#666699',\r\n    'legal_terminal_1': '#aa7777',\r\n    'legal_terminal_2': '#996666',\r\n    'legal_terminal_solo': '#996666',\r\n    'legal_complete_1': '#77aa77',\r\n    'legal_complete_2': '#669966',\r\n    'legal_complete_solo': '#669966',\r\n    'main_1': '#444444',\r\n    'main_2': '#333333',\r\n    'main_solo': '#333333',\r\n    'main_final_1': '#333366',\r\n    'main_final_2': '#222255',\r\n    'main_final_solo': '#222255',\r\n    'main_terminal_1': '#663333',\r\n    'main_terminal_2': '#552222',\r\n    'main_terminal_solo': '#552222',\r\n    'main_complete_1': '#336633',\r\n    'main_complete_2': '#225522',\r\n    'main_complete_solo': '#225522',\r\n    'forced_1': '#cccccc',\r\n    'forced_2': '#bbbbbb',\r\n    'forced_solo': '#bbbbbb',\r\n    'forced_final_1': '#bbbbee',\r\n    'forced_final_2': '#aaaadd',\r\n    'forced_final_solo': '#aaaadd',\r\n    'forced_terminal_1': '#eebbbb',\r\n    'forced_terminal_2': '#ddaaaa',\r\n    'forced_terminal_solo': '#ddaaaa',\r\n    'forced_complete_1': '#bbeebb',\r\n    'forced_complete_2': '#aaddaa',\r\n    'forced_complete_solo': '#aaddaa',\r\n    'text_final_1': '#000088',\r\n    'text_final_2': '#000088',\r\n    'text_final_solo': '#000088',\r\n    'text_terminal_1': '#880000',\r\n    'text_terminal_2': '#880000',\r\n    'text_terminal_solo': '#880000',\r\n    'text_complete_1': '#007700',\r\n    'text_complete_2': '#007700',\r\n    'text_complete_solo': '#007700'\r\n};\r\nfunction dot_to_svg(dot, config) {\r\n    return vizjs(dot, config);\r\n}\r\nfunction svg_el(dot, config) {\r\n    return new DOMParser().parseFromString(dot_to_svg(dot, config), 'text/html');\r\n}\r\nfunction png_el(dot, config) {\r\n    var cfg = Object.assign({}, config, { format: \"png-image-element\" });\r\n    return vizjs(dot, cfg);\r\n}\r\nfunction dot(jssm) {\r\n    const l_states = jssm.states();\r\n    const node_of = state => `n${l_states.indexOf(state)}`, vc = col => (default_viz_colors[col] || '');\r\n    const nodes = l_states.map((s) => {\r\n        const this_state = jssm.state_for(s), terminal = jssm.state_is_terminal(s), final = jssm.state_is_final(s), complete = jssm.state_is_complete(s), features = [\r\n            ['label', s],\r\n            ['peripheries', complete ? 2 : 1],\r\n            ['fillcolor', final ? vc('fill_final') :\r\n                    (complete ? vc('fill_complete') :\r\n                        (terminal ? vc('fill_terminal') :\r\n                            ''))]\r\n        ]\r\n            .filter(r => r[1])\r\n            .map(r => `${r[0]}=\"${r[1]}\"`)\r\n            .join(' ');\r\n        return `${node_of(s)} [${features}];`;\r\n    }).join(' ');\r\n    const strike = [];\r\n    const edges = jssm.states().map((s) => jssm.list_exits(s).map((ex) => {\r\n        if (strike.find(row => (row[0] === s) && (row[1] == ex))) {\r\n            return '';\r\n        }\r\n        const doublequote = txt => txt.replace('\"', '\\\\\"');\r\n        const edge = jssm.list_transitions(s, ex), edge_id = jssm.get_transition_by_state_names(s, ex), edge_tr = jssm.lookup_transition_for(s, ex), pair = jssm.list_transitions(ex, s), pair_id = jssm.get_transition_by_state_names(ex, s), pair_tr = jssm.lookup_transition_for(ex, s), double = pair_id && (s !== ex), head_state = jssm.state_for(s), tail_state = jssm.state_for(ex), nlJoinIfAny = items => items.filter(item => !([undefined, ''].includes(item))).join('\\n'), if_obj_field = (obj, field) => obj ? (obj[field] || '') : '', h_final = jssm.state_is_final(s), h_complete = jssm.state_is_complete(s), h_terminal = jssm.state_is_terminal(s), t_final = jssm.state_is_final(ex), t_complete = jssm.state_is_complete(ex), t_terminal = jssm.state_is_terminal(ex), lineColor = (final, complete, terminal, lkind, _solo_1_2 = '_solo') => final ? (vc(`${lkind}_final` + _solo_1_2)) :\r\n            (complete ? (vc(`${lkind}_complete` + _solo_1_2)) :\r\n                (terminal ? (vc(`${lkind}_terminal` + _solo_1_2)) :\r\n                    vc(`${lkind}` + _solo_1_2))), textColor = (final, complete, terminal, _solo_1_2 = '_solo') => final ? (vc('text_final' + _solo_1_2)) :\r\n            (complete ? (vc('text_complete' + _solo_1_2)) :\r\n                (terminal ? (vc('text_terminal' + _solo_1_2)) :\r\n                    '')), headColor = textColor(h_final, h_complete, h_terminal, double ? '_1' : '_solo'), tailColor = textColor(t_final, t_complete, t_terminal, double ? '_2' : '_solo'), labelInline = [\r\n            [pair, 'probability', 'headlabel', 'name', 'action', double, headColor],\r\n            [edge, 'probability', 'taillabel', 'name', 'action', true, tailColor]\r\n        ]\r\n            .map(r => ({ which: r[2], whether: (r[5] ? ([(if_obj_field(r[0], r[5])), (if_obj_field(r[0], r[1])), (if_obj_field(r[0], r[3]))].filter(q => q).join('<br/>') || '') : ''), color: r[6] }))\r\n            .filter(present => present.whether)\r\n            .map(r => `${r.which}=${(r.color) ? `<<font color=\"${(r.color)}\">${(r.whether)}</font>>` : `\"${(r.whether)}\"`};`)\r\n            .join(' '), label = edge_tr ? ([`${((edge_tr.action || ''))}`, `${((edge_tr.probability || ''))}`]\r\n            .filter(not_empty => not_empty !== '')\r\n            .join('\\n') || undefined) : undefined, maybeLabel = label ? `taillabel=\"${doublequote(label)}\";` : '', rlabel = pair_tr ? ([`${((pair_tr.action || ''))}`, `${((pair_tr.probability || ''))}`]\r\n            .filter(not_empty => not_empty !== '')\r\n            .join('\\n') || undefined) : undefined, maybeRLabel = rlabel ? `headlabel=\"${doublequote(rlabel)}\";` : '', tc1 = lineColor(t_final, t_complete, t_terminal, edge_tr.kind, '_1'), tc2 = lineColor(h_final, h_complete, h_terminal, (pair_tr || {}).kind, '_2'), tcd = lineColor(t_final, t_complete, t_terminal, edge_tr.kind, '_solo'), arrowHead = edge_tr.forced_only ? 'ediamond' : (edge_tr.main_path ? 'normal;weight=5' : 'empty'), arrowTail = pair_tr ? (pair_tr.forced_only ? 'ediamond' : (pair_tr.main_path ? 'normal;weight=5' : 'empty')) : '', edgeInline = edge ? (double ? `${maybeLabel}${maybeRLabel}arrowhead=${arrowHead};arrowtail=${arrowTail};dir=both;color=\"${tc1}:${tc2}\"`\r\n            : `${maybeLabel}arrowhead=${arrowHead};color=\"${tcd}\"`)\r\n            : '';\r\n        if (pair) {\r\n            strike.push([ex, s]);\r\n        }\r\n        return `${node_of(s)}->${node_of(ex)} [${labelInline}${edgeInline}];`;\r\n    }).join(' ')).join(' ');\r\n    let MaybeRankDir = 'rankdir=LR;';\r\n    return `digraph G {\\n${MaybeRankDir}  fontname=\"Open Sans\";\\n  style=filled;\\n  bgcolor=\"${vc('graph_bg_color')}\";\\n  node [fontsize=14; shape=box; style=filled; fillcolor=white; fontname=\"Times New Roman\"];\\n  edge [fontsize=6;fontname=\"Open Sans\"];\\n\\n  ${nodes}\\n\\n  ${edges}\\n}`;\r\n}\r\nexport { dot, dot_to_svg, svg_el, png_el, vizjs };\r\n//# sourceMappingURL=jssm-viz.js.map"}
